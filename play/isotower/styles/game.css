/* 
  This stylesheet contains all CSS rules specifically for the Phaser game's
  DOM elements, such as the game container, menus, popups, and the admin console.
  It is kept separate from the main website's styling (index.css).
*/

/* --- PHASER GAME SPECIFIC STYLES --- */
#root {
    width: 100%;
    max-width: min(1280px, calc(85vh * (1280 / 720)));
    height: auto;
    max-height: 85vh;
    aspect-ratio: 1280 / 720;
    position: relative;
    overflow: hidden; /* This is key to clipping the video */
    border: 3px solid #f97316;
    border-radius: 5px;
    box-shadow: 0 0 20px rgba(249, 115, 22, 0.5);
}

#bg-video {
    position: absolute;
    top: 50%;
    left: 50%;
    min-width: 100%;
    min-height: 100%;
    width: auto;
    height: auto;
    z-index: -2;
    transform: translateX(-50%) translateY(-50%);
}

#root:fullscreen,
#root:-webkit-full-screen,
#root:-moz-full-screen,
#root:-ms-fullscreen {
    width: 100% !important;
    height: 100% !important;
    background-color: #000;
    display: grid !important;
    place-items: center !important;
    aspect-ratio: unset;
    max-width: none !important;
    max-height: none !important;
}

#root:fullscreen > canvas,
#root:-webkit-full-screen > canvas,
#root:-moz-full-screen > canvas,
#root:-ms-fullscreen > canvas {
    position: relative !important;
    top: auto !important;
    left: auto !important;
}

#root canvas {
    display: block;
    margin: auto;
    width: 100% !important;
    height: 100% !important;
    /* Canvas is intentionally left un-positioned to sit in the normal document flow,
       above the negatively-indexed background elements. */
}

/*
  This targets the special container Phaser creates for DOM elements like menus.
  We must place it on top of the canvas, otherwise the menus will be invisible.
  It's positioned absolutely relative to #root.
*/
#root canvas + div {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1; /* Needs to be >0 to sit on top of the un-positioned canvas. */
}


/* --- IN-GAME UI & MENUS --- */
.menu-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(18, 18, 18, 0.85);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    pointer-events: auto;
}

.pause-menu-wrapper {
    display: flex;
    gap: 2rem;
    align-items: flex-start;
}

.menu-content {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    background-color: #1f1f1f;
    padding: 2rem;
    border-radius: 8px;
    border: 1px solid #444;
    min-width: 280px;
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
}

.menu-title {
    font-family: 'Bebas Neue', cursive;
    font-size: 2.5rem;
    color: #f97316;
    text-align: center;
    margin-bottom: 1rem;
    letter-spacing: 1px;
}

.menu-btn {
    width: 100%;
    background-color: #333;
    color: #eee;
    border: 1px solid #555;
    padding: 0.75rem;
    border-radius: 5px;
    font-family: 'Roboto Mono', monospace;
    font-size: 1.1rem;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s ease;
}

.menu-btn:hover {
    background-color: #444;
    border-color: #f97316;
    color: #f97316;
}

.menu-btn--danger {
    border-color: #7f1d1d;
    color: #fca5a5;
}

.menu-btn--danger:hover {
    background-color: #991b1b;
    border-color: #ef4444;
    color: #fff;
}

.player-list-container {
    width: 250px;
    height: 350px;
    background-color: #1f1f1f;
    border: 1px solid #444;
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
    border-radius: 8px;
    padding: 15px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    color: white;
    font-family: 'Roboto Mono', monospace;
    pointer-events: auto;
}

.player-list-header {
    font-family: 'Bebas Neue', cursive;
    letter-spacing: 1px;
    color: #f97316;
    margin: 0 0 10px 0;
    font-size: 1.5rem;
}

#playerList {
    width: 100%;
    height: 280px;
    overflow-y: auto;
    background-color: #1a1a1a;
    padding: 10px;
    border-radius: 3px;
}

.player-entry {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px;
    border-bottom: 1px solid #333;
}

.player-name {
    color: #ddd;
}

.player-invite-btn {
    padding: 5px 10px;
    background-color: #f97316;
    color: #121212;
    border: none;
    border-radius: 3px;
    cursor: pointer;
    font-family: 'Roboto Mono', monospace;
    transition: background-color 0.2s;
}

.player-invite-btn:hover {
    background-color: #fb923c;
}

.player-invite-btn:disabled {
    background-color: #555;
    color: #999;
    cursor: not-allowed;
}

.player-status {
    font-style: italic;
    color: #888;
}
.player-status--tower {
    color: #a29bfe;
}

.invite-popup-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9998;
    pointer-events: auto;
    background-color: rgba(0, 0, 0, 0.5);
}

.invite-popup-content {
    width: 350px;
    background-color: #222;
    padding: 25px;
    border-radius: 10px;
    border: 2px solid #f97316;
    text-align: center;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
}

.invite-popup-text {
    font-size: 20px;
    color: white;
    margin-bottom: 20px;
}

.invite-popup-actions {
    display: flex;
    justify-content: center;
    gap: 20px;
}

.invite-popup-btn {
    padding: 10px 30px;
    font-size: 16px;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-family: 'Bebas Neue', cursive;
    letter-spacing: 1px;
    transition: opacity 0.2s;
}
.invite-popup-btn:hover {
    opacity: 0.9;
}

.invite-popup-btn.btn-accept {
    background-color: #22c55e;
}

.invite-popup-btn.btn-decline {
    background-color: #ef4444;
}

/* --- ADMIN CONSOLE --- */
.admin-console-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 80%;
    background-color: rgba(18, 18, 18, 0.92);
    border-top: 4px solid #f97316;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    display: flex;
    flex-direction: column;
    padding: 20px;
    pointer-events: auto;
    z-index: 10000;
}

.console-output {
    flex-grow: 1;
    overflow-y: auto;
    font-size: 1rem;
    color: #e0e0e0;
    margin-bottom: 20px;
    padding-right: 10px;
}

.console-output div {
    padding: 5px 0;
    line-height: 1.6;
}

.console-output .log-command { color: #f97316; }
.console-output .log-system { color: #60a5fa; font-style: italic; }
.console-output .log-error { color: #ef4444; }

.console-input {
    width: 100%;
    background-color: #1f1f1f;
    border: 1px solid #555;
    color: #e0e0e0;
    padding: 15px;
    border-radius: 3px;
    outline: none;
    font-family: 'Roboto Mono', monospace;
    font-size: 1rem;
}
.console-input:focus {
    border-color: #f97316;
}


/* --- GAME-SPECIFIC RESPONSIVE STYLES --- */
@media (max-width: 767px) {
    .pause-menu-wrapper {
        flex-direction: column;
        gap: 1rem;
        align-items: center;
        width: 90vw;
    }
    
    .menu-content, .player-list-container {
        width: 100%;
        max-width: 320px;
        padding: 1.5rem;
    }

    .player-list-container {
        height: auto;
        max-height: 300px;
    }

    #playerList {
        height: auto;
    }
    
    .menu-title {
        font-size: 2rem;
    }

    .invite-popup-content {
        width: 90vw;
        max-width: 320px;
        padding: 20px;
    }

    .invite-popup-text {
        font-size: 18px;
    }
    
    .admin-console-overlay {
        height: 70%;
        padding: 10px;
    }
    
    .console-input {
        padding: 10px;
    }
}